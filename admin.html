<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Admin Panel - Sports Pro</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        /* এডমিন বক্সের জন্য কাস্টম ডিজাইন */
        .admin-box { 
            background: #111827; /* Dark background for professional look */
            padding: 30px; 
            border-radius: 15px; 
            border: 1px solid #334155; 
            max-width: 500px; 
            margin: 50px auto; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        h2 { color: #00ff88; margin-bottom: 20px; }
        input, textarea, select { 
            width: 100%; 
            padding: 12px; 
            margin: 10px 0; 
            background: #0f172a; 
            border: 1px solid #334155; 
            color: white; 
            border-radius: 8px; 
            outline: none;
        }
        input:focus, textarea:focus { border-color: #00ff88; }
        .btn-post { 
            background: #00ff88; 
            color: #000; 
            font-weight: bold; 
            border: none; 
            cursor: pointer; 
            padding: 15px; 
            border-radius: 8px; 
            width: 100%; 
            font-size: 1rem;
            transition: 0.3s;
        }
        .btn-post:hover { background: #00cc6e; transform: translateY(-2px); }
        .btn-post:active { transform: translateY(0); }
    </style>
</head>
<body>
    <div class="admin-box">
        <h2 style="text-align: center;">Post New Match Update</h2>
        
        <input type="password" id="adminKey" placeholder="Enter Secret Admin Password">
        <hr style="border: 0.5px solid #334155; margin: 20px 0;">
        
        <label style="color: #94a3b8; font-size: 0.8rem;">Match Name</label>
        <input type="text" id="mName" placeholder="e.g. Real Madrid vs Barcelona">
        
        <label style="color: #94a3b8; font-size: 0.8rem;">Match Schedule (Date & Time)</label>
        <input type="datetime-local" id="mTime">
        
        <label style="color: #94a3b8; font-size: 0.8rem;">Select Sport</label>
        <select id="mCat">
            <option value="Football">Football</option>
            <option value="Cricket">Cricket</option>
            <option value="Basketball">Basketball</option>
            <option value="Other">Other</option>
        </select>
        
        <label style="color: #94a3b8; font-size: 0.8rem;">SEO Friendly Analysis (Description)</label>
        <textarea id="mDesc" rows="6" placeholder="Write detailed match analysis for AdSense approval..."></textarea>
        
        <button class="btn-post" id="publishBtn" onclick="publishMatch()">Publish Now</button>
    </div>

    <script>
        // আপনার Supabase সেটিংস থেকে URL এবং Key এখানে বসান
        const SUPABASE_URL = 'YOUR_SUPABASE_URL';
        const SUPABASE_KEY = 'YOUR_SUPABASE_ANON_KEY';
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function publishMatch() {
            const publishBtn = document.getElementById('publishBtn');
            const pass = document.getElementById('adminKey').value;
            const name = document.getElementById('mName').value;
            const time = document.getElementById('mTime').value;
            const desc = document.getElementById('mDesc').value;
            const cat = document.getElementById('mCat').value;

            // ১. পাসওয়ার্ড ভ্যালিডেশন
            if(pass !== "MY_PASSWORD_123") { // এখানে আপনার পছন্দের পাসওয়ার্ড দিন
                alert("Unauthorized! Incorrect Password.");
                return;
            }

            // ২. ইনপুট ফিল্ড ভ্যালিডেশন
            if(!name || !time || !desc) {
                alert("Please fill all the fields correctly.");
                return;
            }

            // ৩. বাটন ডিজেবল করা (ডাবল ক্লিক রোধ করতে)
            publishBtn.disabled = true;
            publishBtn.innerText = "Publishing...";

            try {
                // ৪. সুপাবেস টেবিলে ডেটা পাঠানো
                const { data, error } = await supabase.from('matches').insert([{
                    match_name: name,
                    match_time: time,
                    description: desc,
                    category: cat
                }]);

                if (error) {
                    throw error;
                } else {
                    alert("Success! Match analysis is now Live.");
                    location.reload(); // ফর্ম ক্লিয়ার করতে পেজ রিফ্রেশ
                }
            } catch (err) {
                alert("Error: " + err.message);
                publishBtn.disabled = false;
                publishBtn.innerText = "Publish Now";
            }
        }
    </script>
</body>
</html>
